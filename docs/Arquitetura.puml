@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml
!define ICONURL https://raw.githubusercontent.com/tupadr3/plantuml-icon-font-sprites/v2.4.0
!includeurl ICONURL/devicons2/dotnetcore.puml
!includeurl ICONURL/devicons/msql_server.puml
!includeurl ICONURL/devicons/react.puml

SHOW_PERSON_PORTRAIT()
LAYOUT_LEFT_RIGHT()
AddRelTag("async", $lineStyle = DashedLine())

Person(User, "Usuário", "Usuário")

System_Ext(Graph, "Microsoft Graph", "Microsoft Graph")
System_Boundary(EduSchedule, "EduSchedule System") {
    Container(Spa, "Single Page Application", "React TypeScript", "Ponto de acesso do usuário a todas as informações de estudantes e eventos.", $sprite="react")
    Container(EduScheduleApi, "EduSchedule API", "C# .Net", "API REST, com endpoints de Estudantes e seus Eventos. Gera Token JWT, ", $sprite="dotnetcore")
    Container(EduScheduleWorker, "EduSchedule Worker", "C# .Net", "Executa processamento agendado em Background", $sprite="dotnetcore")
    ContainerDb(Database, " EduSchedule Database", "SQL Server", "Armazena informações de estudantes e eventos.", $sprite="msql_server")

    Rel(User,Spa,"Faz login, acessa Dashboard, visualiza Eventos de Estudantes")
    Rel(Spa,EduScheduleApi,"Faz chamadas para", "HTTPS/JSON")
    Rel(EduScheduleApi,Database,"Faz leitura das informações de Estudantes e Eventos armazenados", "Entity Framework")
    Rel(EduScheduleWorker,Database,"Insere e atuaiza informações de Estudantes e Eventos", "Entity Framework")
}
Rel(EduScheduleWorker,Graph,"Busca atualizações de Estudantes e Eventos", "Graph SDK - HTTPS/JSON")


@enduml